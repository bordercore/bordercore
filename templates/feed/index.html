{% extends "base.html" %}

{% block content %}

<script type="text/javascript">

$(document).ready(function() {

	var feed_json_text = {{ json|safe }};

	$("a[id^='link_']").click( function(e) {
		var myMatches = this.getAttribute('id').match(/link_(.*)$/);
		var feed_id = myMatches[1];
		showFeed(feed_id)
	})

	function showFeed(feed_id) {

		$("a[id='link_" + feed_id+ "']").parent().html( feed_json_text[ feed_id ]['name']);
		$('#feed-title').html( '<a href="' + feed_json_text[ feed_id ]['feed_homepage']+ '">' + feed_json_text[ feed_id ]['name'] + '</a>');

		myText = '';

		for ( var i = 0; i < feed_json_text[ feed_id ]['links'].length; i++) {
			myText += "<a href=\"" + feed_json_text[ feed_id ]['links'][ i ]['link'] + "\">" + feed_json_text[ feed_id ]['links'][ i ]['title'] + "</a><br />";
		}

		$('#feed-item-list').html( myText );

	}

	showFeed(1);

});

</script>

<div class="span4">
<h3>Feed List</h3>
<hr />
<ul>
{% for feed in feed_info %}
<li><a href="#" id="link_{{ feed.id }}">{{ feed.name }}</a></li>
{% endfor %}
</ul>

</div>

<div class="span7">
<h3 id="feed-title">Hey there</h3>
<hr />
<span id="feed-item-list"></span>
</div>

{% endblock %}
