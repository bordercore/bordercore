{% extends "base.html" %}

{% load dict_get %}

{% load favicon %}

{% block title %} Node {% endblock %}

{% block content %}

    <div class="card-grid ml-3" id="vue-app">

        <div class="d-flex flex-row flex-wrap">
        {% for node in nodes %}

            <div class="w-50">
                <h4>
                    <a href="{% url "node:detail" node.uuid %}">{{ node.name }}</a>
                    <div class="node-list-stats pl-2 pt-1 text-primary">
                        <ul class="list-unstyled">
                            <li>Last modified: <span class="text-emphasis">{{ node.modified|date:"M d, Y" }}</span></li>
                            <li>Blob count: <span class="text-emphasis">{{ node.blob_count }}</span></li>
                            <li>Bookmark count: <span class="text-emphasis">{{ node.bookmark_count }}</span></li>
                        </ul>
                    </div>
                </h4>
            </div>

        {% endfor %}
        </div>

    </div>

{% endblock %}

{% block javascript %}

    {{ block.super }}

    <script type="text/javascript">

        axios.defaults.xsrfCookieName = "csrftoken"
        axios.defaults.xsrfHeaderName = "X-CSRFTOKEN"

        Vue.mixin({ delimiters: ["[[", "]]"] });

        new Vuex.Store({
            state: {
            },
            getters: {},
            mutations: {},
        });

        new Vue({
            el: "#vue-app",
            components: {
            }
        });

    </script>

{% endblock %}
