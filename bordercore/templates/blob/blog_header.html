
<script type="text/javascript" src="{{ STATIC_URL }}js/typeahead.bundle.min.js"></script>
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/typeahead-bootstrap3.css" />

<script type="text/javascript">

    $(document).ready(function() {

        var engine = new Bloodhound({
            name: 'tags',
            remote: {
                url: '{% url 'tag_search' %}?query=%QUERY' + '&type=blog',
                wildcard: '%QUERY'
            },
            datumTokenizer: function(d) { return Bloodhound.tokenizers.whitespace(d.val); },
            queryTokenizer: Bloodhound.tokenizers.whitespace
        });

        engine.initialize();

        $('#tag-filter').typeahead({
            autoselect: true
        }, {
            display: 'value',
            source: engine,
        });

        $('#tag-filter').bind('typeahead:selected', function(obj, datum, name) {
            window.location='{% url 'blog_list' %}?tagsearch=' + datum.value;
        }).bind('focus', function(obj) {
            $('#blog-search').val('');
        });

        $('#blog-search').bind('keyup', function(event, selection) {
            if ((event.which && event.which == 13) || (event.keyCode && event.keyCode == 13)) {
                $('form#blog-search-form').submit();
                return false;
            } else {
                return true;
            }
        }).bind('focus', function(obj) {
            $('#tag-filter').val('');
        });

    });

</script>

<div class="row">
    <div class="col-lg-7">

        <form class="form-inline" name="nav_form" id="blog-search-form" action="{% url 'blog_list' %}" method="get">

            <label>Search</label>
            <div class="form-group">
                <input class="form-control" id="blog-search" type="text" name="search_item" value="{{ request.GET.search_item }}" accesskey="s" />
            </div>

            <label>Tag Filter</label>
            <div class="form-group">
                <input class="form-control" id="tag-filter" type="text" value="{{ request.GET.tagsearch }}" autocomplete="off" />
            </div>

&nbsp; &nbsp; <a class="btn" href="{% url 'blob_add' %}?is_blog=true">Add post</a>

        </form>

    </div>
</div>
